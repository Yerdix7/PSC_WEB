{% extends "base.html" %}
{% block title %}Dashboard 路 PSC{% endblock %}
{% block content %}
<h1>Bienvenido, {{ user.name }}</h1>
<p>Email: <strong>{{ user.email }}</strong></p>

<div class="card">
  <h2>Mi B贸veda Segura</h2>
  <p>Accede a tus contrase帽as y archivos importantes</p>
  <a href="{{ url_for('vault') }}" class="btn" id="access-vault-btn"> Acceder a la B贸veda</a>
</div>

<form method="post" action="{{ url_for('logout') }}">
  <button type="submit" class="secondary">Cerrar sesi贸n</button>
</form>

{% if user.requires_keystroke %}
<script src="{{ url_for('static', filename='keystroke.js') }}"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    const accessBtn = document.getElementById('access-vault-btn');
    
    accessBtn.addEventListener('click', function(e) {
        e.preventDefault();
        
        // Redirigir directamente a la b贸veda
        // La validaci贸n de keystroke se har谩 al intentar descifrar contrase帽as
        window.location.href = this.href;
    });
});
</script>
{% endif %}
{% endblock %}